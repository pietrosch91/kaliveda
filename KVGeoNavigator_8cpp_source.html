<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KaliVeda: kaliveda.doxygen/KVMultiDet/geometry/KVGeoNavigator.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KaliVeda
   &#160;<span id="projectnumber">1.10/15</span>
   </div>
   <div id="projectbrief">Heavy-Ion Analysis Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_ee2496c42ce3447ad0c4fd100b52f5e5.html">kaliveda.doxygen</a></li><li class="navelem"><a class="el" href="dir_74c7b176af7644ee55a1ecb9dd61ada5.html">KVMultiDet</a></li><li class="navelem"><a class="el" href="dir_10e1a6ad01863b820172b3cd0aaf87bb.html">geometry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">KVGeoNavigator.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="KVGeoNavigator_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//Created by KVClassFactory on Mon Apr 22 14:53:13 2013</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//Author: John Frankland,,,</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KVGeoNavigator_8h.html">KVGeoNavigator.h</a>&quot;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KVEvent_8h.html">KVEvent.h</a>&quot;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KV3DGeoTrack_8h.html">KV3DGeoTrack.h</a>&quot;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;TGeoManager.h&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;TGeoMatrix.h&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KVGeoStrucElement_8h.html">KVGeoStrucElement.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;TVirtualPad.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;ClassImp(<a class="code" href="classKVGeoNavigator.html">KVGeoNavigator</a>)</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// BEGIN_HTML &lt;!--</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">/* --&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">&lt;h2&gt;KVGeoNavigator&lt;/h2&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">&lt;h4&gt;Propagate particles of an event through a TGeo geometry&lt;/h4&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">&lt;!-- */</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// --&gt; END_HTML</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// This is a base class for propagation of charged particles (KVNucleus) in events (KVEvent)</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// through any TGeoManager ROOT geometry. Classes derived from this one can</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// override the method</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//     ParticleEntersNewVolume(KVNucleus*)</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// in order to do something useful every time that a particle of the event</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// enters a new volume (absorber, detector, etc.) of the geometry.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// Then to use your derived class do something like:</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//  MyGeoNavigator nav( gGeoManager );</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//  while( nevents-- ) {</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//       nav.PropagateEvent( event );</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// RULES FOR CREATION OF GEOMETRY</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// In order for KaliVeda to &quot;understand&quot; your geometry, a few simple rules need</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// to be followed.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// GEOMETRY STRUCTURE ELEMENTS</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// These are used to group detectors and/or other structures.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// They are recognized by their node names, which should be of the form:</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//     STRUCT_[type]_[number]</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// STRUCTURE &amp; DETECTOR NAME FORMATTING</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//    -- STRUCTURES --</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// The default names for structures are taken from the node name by stripping off</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// the &quot;STRUCT_&quot; prefix. It is assumed that the remaining string is of the form</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//    &quot;[structure type]_[structure number]&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">// This is the name that will be used by default for the structure.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// However, this format can be change by calling method</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">//    SetStructureNameFormat(&quot;[structure type]&quot;, &quot;[format]&quot;)</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// where format can contain any of the following tokens:</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//    $type$         - will be replaced by the structure type name</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//    $type%[fmt]$   - will be replaced by the structure type name using given format</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//    $number$       - will be replaced by the structure number</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//    $number%[fmt]$ - will be replaced by the structure number using given format</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// Example: to change the name of the block in the previous example to &quot;B-02&quot;,</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//   SetStructureNameFormat(&quot;BLOCK&quot;, &quot;$type%.1s$-$number%02d$&quot;)</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//    -- DETECTORS --</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// The default base names for detectors are taken from the node name by stripping off</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// the &quot;DET_&quot; prefix. In order to ensure that all detectors have unique names,</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// by default we prefix the names of the parent structures to the basename in</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// order to generate the full name of the detector:</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//    [struc1-name]_[struc2-name]_..._[detector-basename]</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// However, this format can be changed by calling method</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//    SetDetectorNameFormat(&quot;[format]&quot;)</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// where format can contain any of the following tokens:</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//    $det:name$             - will be replaced by the detector basename</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//    $struc:[type]:name$    - will be replaced by the name of the parent structure of given type</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//    $struc:[type]:type$    - will be replaced by the type of the parent structure of given type</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//    $struc:[type]:number$  - will be replaced by the number of the parent structure of given type</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// plus additional formatting information as for SetStructureNameFormat (see above).</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">// Example: to change the name of the &quot;SI1-T1&quot; detector in the previous example to</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">//  &quot;SI1-T1-Q1-B2&quot;:</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">//   SetDetectorNameFormat(&quot;$det:name$-Q$struc:QUARTET:number$-B$struc:BLOCK:number$&quot;)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">// Or if you also change the format of the structure names:</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">//   SetStructureNameFormat(&quot;BLOCK&quot;, &quot;$type%.1s$$number$&quot;)</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//   SetStructureNameFormat(&quot;QUARTET&quot;, &quot;$type%.1s$$number$&quot;)</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//   SetDetectorNameFormat(&quot;$det:name$-$struc:QUARTET:name$-$struc:BLOCK:name$&quot;)</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a019255092610bfed928ca20abc166643">  168</a></span>&#160;void <a class="code" href="classKVGeoNavigator.html">KVGeoNavigator</a>::FormatStructureName(const Char_t* type, Int_t number, <a class="code" href="classKVString.html">KVString</a>&amp; name)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="comment">// If a format for naming structures of given type has been defined by a call</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="comment">// to SetStructureNameFormat(const Char_t *, const Char_t *), we use it to</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="comment">// format the name in the TString.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="comment">// If no format was given, we use by default &quot;[type]_[number]&quot;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="comment">// If SetNameCorrespondanceList(const Char_t *) was used, we use it to translate</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <span class="comment">// any names resulting from this formatting to their final value.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   name = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   <span class="keywordflow">if</span> (fStrucNameFmt.HasParameter(type)) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="classKVString.html">KVString</a> fmt = fStrucNameFmt.GetStringValue(type);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      fmt.<a class="code" href="classKVString.html#a09cf7b4f40f96fc75a3e1d244aecc386">Begin</a>(<span class="stringliteral">&quot;$&quot;</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">while</span> (!fmt.<a class="code" href="classKVString.html#a2b4b016b6db4b17ce8acdacf8c3b9f85">End</a>()) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <a class="code" href="classKVString.html">KVString</a> bit = fmt.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         <span class="keywordflow">if</span> (bit.BeginsWith(<span class="stringliteral">&quot;type&quot;</span>)) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            Ssiz_t ind = bit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;               bit.Remove(0, ind);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;               name += Form(bit.Data(), type);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;               name += type;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bit.BeginsWith(<span class="stringliteral">&quot;number&quot;</span>)) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            Ssiz_t ind = bit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;               bit.Remove(0, ind);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;               name += Form(bit.Data(), number);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;               name += number;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            name += bit;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      name.Form(<span class="stringliteral">&quot;%s_%d&quot;</span>, type, number);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   TString tmp;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   GetNameCorrespondance(name.Data(), tmp);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   name = tmp;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a3480e5416e2a39961da6751e36375edd">  219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a3480e5416e2a39961da6751e36375edd">KVGeoNavigator::FormatDetectorName</a>(<span class="keyword">const</span> Char_t* basename, <a class="code" href="classKVString.html">KVString</a>&amp; name)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="comment">// If a format for naming detectors has been defined by a call</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="comment">// to SetDetectorNameFormat(const Char_t *), we use it to</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="comment">// format the name in the TString.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="comment">// If no format was given we prefix the names of the parent structures</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="comment">// to the basename in order to generate the full name of the detector:</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="comment">//    [struc1-name]_[struc2-name]_..._[detector-basename]</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="comment">// If SetNameCorrespondanceList(const Char_t *) was used, we use it to translate</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="comment">// any names resulting from this formatting to their final value.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   name = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">fCurStrucNumber</a>) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="comment">// no parent structures</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      name = basename;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#abbb535d70cf595e6b3b7705597e9dd07">fDetNameFmt</a> == <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">fCurStrucNumber</a>; i++) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>* el = (<a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>*)<a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>[i];</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            name += Form(<span class="stringliteral">&quot;%s_&quot;</span>, el-&gt;GetName());</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         name += basename;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <span class="comment">//    $det:name$             - will be replaced by the detector basename</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <span class="comment">//    $struc:[type]:name$    - will be replaced by the name of the parent structure of given type</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;         <span class="comment">//    $struc:[type]:type$    - will be replaced by the type of the parent structure of given type</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;         <span class="comment">//    $struc:[type]:number$  - will be replaced by the number of the parent structure of given type</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         <a class="code" href="classKVGeoNavigator.html#abbb535d70cf595e6b3b7705597e9dd07">fDetNameFmt</a>.<a class="code" href="classKVString.html#a09cf7b4f40f96fc75a3e1d244aecc386">Begin</a>(<span class="stringliteral">&quot;$&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         <span class="keywordflow">while</span> (!<a class="code" href="classKVGeoNavigator.html#abbb535d70cf595e6b3b7705597e9dd07">fDetNameFmt</a>.<a class="code" href="classKVString.html#a2b4b016b6db4b17ce8acdacf8c3b9f85">End</a>()) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="classKVString.html">KVString</a> bit = <a class="code" href="classKVGeoNavigator.html#abbb535d70cf595e6b3b7705597e9dd07">fDetNameFmt</a>.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span> (bit.Contains(<span class="stringliteral">&quot;:&quot;</span>)) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;               bit.<a class="code" href="classKVString.html#a09cf7b4f40f96fc75a3e1d244aecc386">Begin</a>(<span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;               <a class="code" href="classKVString.html">KVString</a> itbit = bit.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;               <span class="keywordflow">if</span> (itbit == <span class="stringliteral">&quot;det&quot;</span>) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                  itbit = bit.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                  <span class="keywordflow">if</span> (itbit.BeginsWith(<span class="stringliteral">&quot;name&quot;</span>)) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                     Ssiz_t ind = itbit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                     <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        itbit.Remove(0, ind);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        name += Form(itbit.Data(), basename);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                     } <span class="keywordflow">else</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        name += basename;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itbit == <span class="stringliteral">&quot;struc&quot;</span>) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                  <a class="code" href="classKVString.html">KVString</a> struc_typ = bit.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                  <a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>* el = 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">fCurStrucNumber</a>; i++) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                     el = (<a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>*)<a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>[i];</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                     <span class="keywordflow">if</span> (el-&gt;<a class="code" href="classKVBase.html#a65aa52b4a7dfd386222c6aa4971f73dc">IsType</a>(struc_typ)) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                  }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                  <span class="keywordflow">if</span> (el) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                     itbit = bit.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                     <span class="keywordflow">if</span> (itbit.BeginsWith(<span class="stringliteral">&quot;name&quot;</span>)) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                        Ssiz_t ind = itbit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                        <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                           itbit.Remove(0, ind);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                           name += Form(itbit.Data(), el-&gt;GetName());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        } <span class="keywordflow">else</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                           name += el-&gt;GetName();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itbit.BeginsWith(<span class="stringliteral">&quot;type&quot;</span>)) {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                        Ssiz_t ind = itbit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                        <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                           itbit.Remove(0, ind);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                           name += Form(itbit.Data(), el-&gt;<a class="code" href="classKVBase.html#a86746121f4faf4c7c4424d22947f2124">GetType</a>());</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                        } <span class="keywordflow">else</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                           name += el-&gt;<a class="code" href="classKVBase.html#a86746121f4faf4c7c4424d22947f2124">GetType</a>();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (itbit.BeginsWith(<span class="stringliteral">&quot;number&quot;</span>)) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        Ssiz_t ind = itbit.Index(<span class="stringliteral">&quot;%&quot;</span>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                        <span class="keywordflow">if</span> (ind &gt; -1) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                           itbit.Remove(0, ind);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                           name += Form(itbit.Data(), el-&gt;<a class="code" href="classKVBase.html#af816a5fef5b105b2d14db80274b931df">GetNumber</a>());</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        } <span class="keywordflow">else</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                           name += el-&gt;<a class="code" href="classKVBase.html#af816a5fef5b105b2d14db80274b931df">GetNumber</a>();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                     }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                  }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;               }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            } <span class="keywordflow">else</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;               name += bit;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   TString tmp;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aa34e5167ea54c2cd30d1d2784bc90a98">GetNameCorrespondance</a>(name.Data(), tmp);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   name = tmp;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a5d89830bace18f2b3544cb033a39dacf">  310</a></span>&#160;<a class="code" href="classKVGeoNavigator.html#a5d89830bace18f2b3544cb033a39dacf">KVGeoNavigator::KVGeoNavigator</a>(TGeoManager* <a class="code" href="namespaceKVUnits.html#af13ae353c0bc16e77ec01cc6aee48999">g</a>)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   : <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>(g), <a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>(<span class="stringliteral">&quot;KVGeoStrucElement&quot;</span>, 50), <a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>(nullptr),</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;     <a class="code" href="classKVGeoNavigator.html#a4cd424f7215ae3657967e04791dc67d8">fDetectorPaths</a>(kTRUE)</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="comment">// Constructor. Call with pointer to geometry.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a59096ccacf9de22c29c16ff6676b4b6e">SetTracking</a>(kFALSE);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a4cd424f7215ae3657967e04791dc67d8">fDetectorPaths</a>.<a class="code" href="classKVSeqCollection.html#a50a61ec8a84ae8f5c42afd2b27a12b60">SetOwner</a>();</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#ab26d59e8661ebb24af61f2b76b0b1f77">  324</a></span>&#160;<a class="code" href="classKVGeoNavigator.html#ab26d59e8661ebb24af61f2b76b0b1f77">KVGeoNavigator::~KVGeoNavigator</a>()</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="comment">// Destructor</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>.Delete();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   SafeDelete(<a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#adb30191411edd592d1bb66b6764021cd">  346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#adb30191411edd592d1bb66b6764021cd">KVGeoNavigator::SetStructureNameFormat</a>(<span class="keyword">const</span> Char_t* type, <span class="keyword">const</span> Char_t* fmt)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="comment">// The default names for structures are taken from the node name by stripping off</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="comment">// the &quot;STRUCT_&quot; prefix. It is assumed that the remaining string is of the form</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="comment">//    &quot;[structure type]_[structure number]&quot;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <span class="comment">// This is the name that will be used by default for the structure.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="comment">// However, this format can be change by calling method</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="comment">//    SetStructureNameFormat(&quot;[structure type]&quot;, &quot;[format]&quot;)</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="comment">// where format can contain any of the following tokens:</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="comment">//    $type$         - will be replaced by the structure type name</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="comment">//    $type%[fmt]$   - will be replaced by the structure type name using given format</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="comment">//    $number$       - will be replaced by the structure number</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="comment">//    $number%[fmt]$ - will be replaced by the structure number using given format</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a6935e6fc94293409f6f447e74da018dd">fStrucNameFmt</a>.<a class="code" href="classKVNameValueList.html#a2b9beaf43ac8d3374c57f8cba5eb030b">SetValue</a>(type, fmt);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a707beaf4fbdca6d9dd2f97eede43bf98">  387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a707beaf4fbdca6d9dd2f97eede43bf98">KVGeoNavigator::SetNameCorrespondanceList</a>(<span class="keyword">const</span> Char_t* listfile)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <span class="comment">// Allows to provide a list of &quot;translations&quot; for naming structures/detectors</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="comment">// &quot;listfile&quot; must be a file in &#39;TEnv&#39; format, e.g.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <span class="comment">// SI_06_1_A1: SI_0601</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="comment">// SI_06_1_A2: SI_0602</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="comment">// SI_06_1_B1: SI_0701</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="comment">// SI_06_1_B2: SI_0702</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="comment">// SI_06_2_A1: SI_0603</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="comment">// SI_06_2_A2: SI_0604</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="comment">// SI_06_2_B1: SI_0703</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="comment">// The name before &#39;:&#39; is the name of the detector or structure as deduced</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="comment">// from the geometry, including any formatting due to SetStructureNameFormat</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="comment">// or SetDetectorNameFormat.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="comment">// The name after &#39;:&#39; is the name that will be used &#39;externally&#39;, e.g. by a</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="comment">// KVMultiDetArray created from the geometry using KVGeoImport.</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="comment">// Several lists can be combined by calling this method several times.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="comment">// &quot;listfile&quot; can be an absolute path name; if not, we look for it in</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="comment">// $KVROOT/KVFiles/data, or in $HOME, or (finally) in $PWD.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   TString fullpath;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classKVBase.html#adaa0b6b0275567d5fd50e2a1a869ed1c">SearchKVFile</a>(listfile, fullpath, <span class="stringliteral">&quot;data&quot;</span>)) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      Warning(<span class="stringliteral">&quot;SetNameCorrespondanceList&quot;</span>, <span class="stringliteral">&quot;File %s not found&quot;</span>, listfile);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>) <a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a> = <span class="keyword">new</span> TEnv;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>-&gt;ReadFile(fullpath, kEnvUser);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#ae7f8ca91ec8b4739d4b94ab22f9369fd">  425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a707beaf4fbdca6d9dd2f97eede43bf98">KVGeoNavigator::SetNameCorrespondanceList</a>(<span class="keyword">const</span> TEnv* list)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;{</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="comment">// copy TEnv of name correspondances</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   SafeDelete(<a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (list) <a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a> = (TEnv*)list-&gt;Clone();</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#aa34e5167ea54c2cd30d1d2784bc90a98">  440</a></span>&#160;Bool_t <a class="code" href="classKVGeoNavigator.html#aa34e5167ea54c2cd30d1d2784bc90a98">KVGeoNavigator::GetNameCorrespondance</a>(<span class="keyword">const</span> Char_t* name, TString&amp; tran)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="comment">// IF name correspondance lists have been set with SetNameCorrespondanceList(const Char_t*),</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="comment">// look up new name for &#39;name&#39;. If found, returns kTRUE and &#39;tran&#39; is the</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="comment">// &#39;translated&#39; name, otherwise returns kFALSE and tran=name.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="comment">//Info(&quot;GetNameCorrespondance&quot;,&quot;Looking for %s...&quot;, name);</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      tran = <a class="code" href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">fDetStrucNameCorrespList</a>-&gt;GetValue(name, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (tran == <span class="stringliteral">&quot;&quot;</span>) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         tran = name;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         <span class="comment">//Info(&quot;GetNameCorrespondance&quot;,&quot;...not found&quot;);</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         <span class="keywordflow">return</span> kFALSE;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="comment">//Info(&quot;GetNameCorrespondance&quot;,&quot;...found %s&quot;, tran.Data());</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keywordflow">return</span> kTRUE;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   }</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <span class="comment">//Info(&quot;GetNameCorrespondance&quot;,&quot;...not found&quot;);</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   tran = name;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">return</span> kFALSE;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a10927a0ff377bed8ed4cbb03183ace35">  469</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a10927a0ff377bed8ed4cbb03183ace35">KVGeoNavigator::PropagateEvent</a>(<a class="code" href="classKVEvent.html">KVEvent</a>* TheEvent, TVector3* TheOrigin)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="comment">// Propagate a set of particles through the geometry</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="comment">// By default, propagates particles from (0,0,0) (world coordinates),</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="comment">// unless a different origin is given.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <a class="code" href="classKVGeoNavigator.html#ace0a5385d6317083f5651a29ba2b563e">ResetTrackID</a>();</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <a class="code" href="classKVNucleus.html">KVNucleus</a>* part;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keywordflow">while</span> ((part = TheEvent-&gt;<a class="code" href="classKVEvent.html#a8e8cebe0efefb4be95272938bedc8c8b">GetNextParticle</a>())) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a7f519f3d934ed37797da23617c432f93">PropagateParticle</a>(part, TheOrigin);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div><div class="line"><a name="l00502"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a9deedb00979b35dcb6d48673cb2df557">  502</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a9deedb00979b35dcb6d48673cb2df557">KVGeoNavigator::ParticleEntersNewVolume</a>(<a class="code" href="classKVNucleus.html">KVNucleus</a>*)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;{</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <span class="comment">// User-overridable method, redefine in child classes</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="comment">// This method is called every time that a propagated particle enters a new volume</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="comment">// in the geometry.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="comment">// The user then has access to the following informations:</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="comment">// - the TGeoVolume the particle is now entering (GetCurrentVolume());</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="comment">// - the node in the geometry this volume occupies (GetCurrentNode());</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <span class="comment">// - the distance the particle will have to travel in this volume before</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="comment">//    leaving it (GetStepSize());</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="comment">// - the position of the particle on the boundary as it enters this volume</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="comment">//    (GetEntryPoint()).</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="comment">// - the position of the particle on the boundary as it leaves this volume</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="comment">//    (GetExitPoint()).</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="comment">// If required, propagation of the particle can be stopped at any time by calling</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="comment">//      SetStopPropagation()</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   AbstractMethod(<span class="stringliteral">&quot;ParticleEntersNewVolume&quot;</span>);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a113f034fedaf0737a6abfa462ed9a767">  529</a></span>&#160;<span class="keyword">const</span> TGeoHMatrix* <a class="code" href="classKVGeoNavigator.html#a113f034fedaf0737a6abfa462ed9a767">KVGeoNavigator::GetCurrentMatrix</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="comment">// Returns pointer to internal copy of current global transformation matrix</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="keywordflow">return</span> &amp;<a class="code" href="classKVGeoNavigator.html#a0c3adc407dfbcc24f92304e07b184082">fCurrentMatrix</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#ae3f3bf93c33f9af1b624d08a94ebdcdf">  550</a></span>&#160;TGeoVolume* <a class="code" href="classKVGeoNavigator.html#ae3f3bf93c33f9af1b624d08a94ebdcdf">KVGeoNavigator::GetCurrentDetectorNameAndVolume</a>(<a class="code" href="classKVString.html">KVString</a>&amp; detector_name, Bool_t&amp; multilayer)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;{</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="comment">// Returns the name of the current detector (if we are inside a detector)</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="comment">// and whether it is a multilayer or simple detector.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="comment">// Returns 0x0 if we are not inside a detector volume.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="comment">// N.B. the returned volume corresponds to the *whole* detector (even if it has several layers).</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="comment">// For a multilayer detector, GetCurrentVolume() returns the volume for the current layer.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="comment">// See ExtractDetectorNameFromPath(KVString&amp;) for details on detector name formatting.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">//    Info(&quot;GetCurrentDetectorNameAndVolume&quot;,&quot;now i am in %s on node %s with path %s and matrix:&quot;,</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">//         fCurrentVolume-&gt;GetName(),fCurrentNode-&gt;GetName(),fCurrentPath.Data());</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">//    fCurrentMatrix.Print();</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   multilayer = kFALSE;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a439af5bb3c1ba645366bd68e8a2bffc0">fCurrentDetectorNode</a> = 0;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   TString volNom = <a class="code" href="classKVGeoNavigator.html#a9ec397c0937ba8de1404ffe74adb3715">GetCurrentVolume</a>()-&gt;GetName();</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   TGeoVolume* detector_volume = 0;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">if</span> (volNom.BeginsWith(<span class="stringliteral">&quot;DET_&quot;</span>)) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="comment">// simple detector</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a439af5bb3c1ba645366bd68e8a2bffc0">fCurrentDetectorNode</a> = <a class="code" href="classKVGeoNavigator.html#a4e9288694d8cdc8596850eda717ffd67">GetCurrentNode</a>();</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      detector_volume = <a class="code" href="classKVGeoNavigator.html#a9ec397c0937ba8de1404ffe74adb3715">GetCurrentVolume</a>();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="comment">// have we hit 1 layer of a multilayer detector?</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      TGeoVolume* mother_vol = <a class="code" href="classKVGeoNavigator.html#a4e9288694d8cdc8596850eda717ffd67">GetCurrentNode</a>()-&gt;GetMotherVolume();</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">if</span> (mother_vol) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;         TString mom = mother_vol-&gt;GetName();</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;         <span class="keywordflow">if</span> (mom.BeginsWith(<span class="stringliteral">&quot;DET_&quot;</span>)) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="comment">// it *is* a multilayer detector (youpi! :-)</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#a526f0663f9f8daa65635afd37b6e99e5">fMotherNode</a>) { <span class="comment">// this is the node corresponding to the whole detector,</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;               <a class="code" href="classKVGeoNavigator.html#a439af5bb3c1ba645366bd68e8a2bffc0">fCurrentDetectorNode</a> = <a class="code" href="classKVGeoNavigator.html#a526f0663f9f8daa65635afd37b6e99e5">fMotherNode</a>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;               detector_volume = mother_vol;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;               multilayer = kTRUE;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (detector_volume) <a class="code" href="classKVGeoNavigator.html#a49388999bdbbd4e543a899b948b3c296">ExtractDetectorNameFromPath</a>(detector_name);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordflow">return</span> detector_volume;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a9d6becf030aed3aa1509b07728428c53">  598</a></span>&#160;TGeoNode* <a class="code" href="classKVGeoNavigator.html#a9d6becf030aed3aa1509b07728428c53">KVGeoNavigator::GetCurrentDetectorNode</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="comment">// Returns the node corresponding to the current detector volume</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="comment">// N.B. the returned node corresponds to the *whole* detector (even if it has several layers).</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classKVGeoNavigator.html#a439af5bb3c1ba645366bd68e8a2bffc0">fCurrentDetectorNode</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a49388999bdbbd4e543a899b948b3c296">  669</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a49388999bdbbd4e543a899b948b3c296">KVGeoNavigator::ExtractDetectorNameFromPath</a>(<a class="code" href="classKVString.html">KVString</a>&amp; detname)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="comment">// We analyse the current path in order to construct the full (unique) name</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="comment">// of the detector, i.e. if the current path is</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="comment">// /TOP_1/STRUCT_BLOCK_2/CHIO_WALL_1/DET_CHIO_2/WINDOW_1</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="comment">// then the default name of the detector will be &quot;BLOCK_2_CHIO_2&quot;</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="comment">// (see below to override this)</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="comment">// This method also fills the fCurrentStructures array with elements</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="comment">// deduced from the path, e.g. if the path is</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="comment">// /TOP_1/STRUCT_BLOCK_2/STRUCT_QUARTET_1/DET_SI1-T1</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="comment">// then by default</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="comment">//  fCurrentStructures[0] = KVGeoStrucElement(name = &quot;BLOCK_2&quot;, type = &quot;BLOCK&quot;, number = 2)</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="comment">//  fCurrentStructures[1] = KVGeoStrucElement(name = &quot;QUARTET_1&quot;, type = &quot;QUARTET&quot;, number = 1)</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="comment">// and the default name of the detector will be &quot;BLOCK_2_QUARTET_1_SI1-T1&quot;</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="comment">// STRUCTURE &amp; DETECTOR NAME FORMATTING</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="comment">// ====================================</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="comment">//    -- STRUCTURES --</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="comment">// The default names for structures are taken from the node name by stripping off</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="comment">// the &quot;STRUCT_&quot; prefix. It is assumed that the remaining string is of the form</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="comment">//    &quot;[structure type]_[structure number]&quot;</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="comment">// (the structure number is always taken after the last occurence of &#39;_&#39; in the</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="comment">// node name). This is the name that will be used by default for the structure.</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="comment">// However, this format can be change by calling method</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="comment">//    SetStructureNameFormat(&quot;[structure type]&quot;, &quot;[format]&quot;)</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="comment">// where format can contain any of the following tokens:</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="comment">//    $type$         - will be replaced by the structure type name</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="comment">//    $type%[fmt]$   - will be replaced by the structure type name using given format</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="comment">//    $number$       - will be replaced by the structure number</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="comment">//    $number%[fmt]$ - will be replaced by the structure number using given format</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="comment">// Example: to change the name of the block in the previous example to &quot;B-02&quot;,</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="comment">//   SetStructureNameFormat(&quot;BLOCK&quot;, &quot;$type%.1s$-$number%02d$&quot;)</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="comment">//    -- DETECTORS --</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   <span class="comment">// The default base names for detectors are taken from the node name by stripping off</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="comment">// the &quot;DET_&quot; prefix. In order to ensure that all detectors have unique names,</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="comment">// by default we prefix the names of the parent structures to the basename in</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="comment">// order to generate the full name of the detector:</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="comment">//    [struc1-name]_[struc2-name]_..._[detector-basename]</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="comment">// However, this format can be changed by calling method</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="comment">//    SetDetectorNameFormat(&quot;[format]&quot;)</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="comment">// where format can contain any of the following tokens:</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="comment">//    $det:name$             - will be replaced by the detector basename</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="comment">//    $struc:[type]:name$    - will be replaced by the name of the parent structure of given type</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="comment">//    $struc:[type]:type$    - will be replaced by the type of the parent structure of given type</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="comment">//    $struc:[type]:number$  - will be replaced by the number of the parent structure of given type</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="comment">// plus additional formatting information as for SetStructureNameFormat (see above).</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="comment">// Example: to change the name of the &quot;SI1-T1&quot; detector in the previous example to</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <span class="comment">//  &quot;SI1-T1-Q1-B2&quot;:</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="comment">//   SetDetectorNameFormat(&quot;$det:name$-Q$struc:QUARTET:number$-B$struc:BLOCK:number$&quot;)</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <span class="comment">// Or if you also change the format of the structure names:</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="comment">//   SetStructureNameFormat(&quot;BLOCK&quot;, &quot;$type%.1s$$number$&quot;)</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="comment">//   SetStructureNameFormat(&quot;QUARTET&quot;, &quot;$type%.1s$$number$&quot;)</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="comment">//   SetDetectorNameFormat(&quot;$det:name$-$struc:QUARTET:name$-$struc:BLOCK:name$&quot;)</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="classKVString.html">KVString</a> path = <a class="code" href="classKVGeoNavigator.html#a9e2c189eb3e425efb3260f3968c4dc47">GetCurrentPath</a>();</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   path.<a class="code" href="classKVString.html#a09cf7b4f40f96fc75a3e1d244aecc386">Begin</a>(<span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   detname = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>.Clear(<span class="stringliteral">&quot;C&quot;</span>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <a class="code" href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">fCurStrucNumber</a> = 0;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">while</span> (!path.<a class="code" href="classKVString.html#a2b4b016b6db4b17ce8acdacf8c3b9f85">End</a>()) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <a class="code" href="classKVString.html">KVString</a> elem = path.<a class="code" href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">Next</a>();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">if</span> (elem.BeginsWith(<span class="stringliteral">&quot;STRUCT_&quot;</span>)) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         <span class="comment">// structure element. strip off &quot;STRUCT_&quot; and extract type and number of structure.</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <a class="code" href="classKVString.html">KVString</a> struc_name(elem(7, elem.Length() - 7));</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>* gel = (<a class="code" href="classKVGeoStrucElement.html">KVGeoStrucElement</a>*)<a class="code" href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">fCurrentStructures</a>.ConstructedAt(<a class="code" href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">fCurStrucNumber</a>++);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         Ssiz_t last_ = struc_name.Last(<span class="charliteral">&#39;_&#39;</span>); <span class="comment">// find last &#39;_&#39; in structure name</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         TString type = struc_name(0, last_);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         TString nums = struc_name(last_ + 1, struc_name.Length() - last_ - 1);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;         Int_t number = nums.Atoi();</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;         <a class="code" href="classKVString.html">KVString</a> name;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;         <a class="code" href="classKVGeoNavigator.html#a019255092610bfed928ca20abc166643">FormatStructureName</a>(type, number, name);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         gel-&gt;SetNameTitle(name, type);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         gel-&gt;<a class="code" href="classKVBase.html#a8083ad16b5c73b6600de8c429f8dd262">SetNumber</a>(number);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elem.BeginsWith(<span class="stringliteral">&quot;DET_&quot;</span>)) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;         <span class="comment">// detector name. strip off &quot;DET_&quot; and use rest as basename</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;         <a class="code" href="classKVString.html">KVString</a> basename(elem(4, elem.Length() - 4));</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         <a class="code" href="classKVGeoNavigator.html#a3480e5416e2a39961da6751e36375edd">FormatDetectorName</a>(basename, detname);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      }</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#a7f519f3d934ed37797da23617c432f93">  768</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#a7f519f3d934ed37797da23617c432f93">KVGeoNavigator::PropagateParticle</a>(<a class="code" href="classKVNucleus.html">KVNucleus</a>* part, TVector3* TheOrigin)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="comment">// Propagate a particle through the geometry in the direction of its momentum,</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="comment">// until we reach the boundary of the geometry, or until fStopPropagation is set to kFALSE.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="comment">// Propagation will also stop if we encounter a volume whose name begins with &quot;DEADZONE&quot;</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="comment">// Define point of origin of particles</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="keywordflow">if</span> (TheOrigin) <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;SetCurrentPoint(TheOrigin-&gt;X(), TheOrigin-&gt;Y(), TheOrigin-&gt;Z());</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordflow">else</span> <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;SetCurrentPoint(0., 0., 0.);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="comment">// unit vector in direction of particle&#39;s momentum</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   TVector3 v = part-&gt;<a class="code" href="classKVParticle.html#a29e68736298c51e68b655290980c1321">GetMomentum</a>().Unit();</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <span class="comment">// use particle&#39;s momentum direction</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;SetCurrentDirection(v.x(), v.y(), v.z());</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;FindNode();</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <a class="code" href="classKVGeoNavigator.html#ad5b3255edc43032342fac9d34ffbb4a7">fCurrentVolume</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentVolume();</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aab86fc2133cb4d5631e4013e8d0f4710">fCurrentNode</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentNode();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a526f0663f9f8daa65635afd37b6e99e5">fMotherNode</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetMother();</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a0c3adc407dfbcc24f92304e07b184082">fCurrentMatrix</a> = *(<a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentMatrix());</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a2e48959ee9444888dc9faabdc76d9ab0">fCurrentPath</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetPath();</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="comment">// move along trajectory until we hit a new volume</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;FindNextBoundaryAndStep();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="classKVGeoNavigator.html#aa3959e2aa7a5b64205af88478aaad090">fStepSize</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetStep();</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   TGeoVolume* newVol = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentVolume();</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   TGeoNode* newNod = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentNode();</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   TGeoNode* newMom = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetMother();</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   TGeoHMatrix* newMatx = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentMatrix();</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   TString newPath = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetPath();</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   Double_t XX, YY, ZZ;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   XX = YY = ZZ = 0.;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="comment">// reset user flag for stopping propagation of particle</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <a class="code" href="classKVGeoNavigator.html#a7a79ba3f5e3996762029dc5f299b71a9">SetStopPropagation</a>(kFALSE);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">//    if(IsTracking()) Info(&quot;PropagateParticle&quot;,&quot;Beginning: i am in %s on node %s with path %s&quot;,</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">//         fCurrentVolume-&gt;GetName(),fCurrentNode-&gt;GetName(),fCurrentPath.Data());</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#a01a9633a452192b3b48e163c4236e0a7">IsTracking</a>() &amp;&amp; <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;IsOutside()) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keyword">const</span> Double_t* posi = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentPoint();</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a019024276fdc5ce72e386776840037e0">AddPointToCurrentTrack</a>(posi[0], posi[1], posi[2]);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="comment">// track particle until we leave the geometry or until fStopPropagation</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="comment">// becomes kTRUE</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;IsOutside()) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keyword">const</span> Double_t* posi = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentPoint();</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <a class="code" href="classKVGeoNavigator.html#ab3ab950e30c41f0c866a6c90c124264d">fEntryPoint</a>.SetXYZ(XX, YY, ZZ);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      XX = posi[0];</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      YY = posi[1];</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      ZZ = posi[2];</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a7684dc8ddde5613d68c72f2083a8eddf">fExitPoint</a>.SetXYZ(XX, YY, ZZ);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      TString vn = <a class="code" href="classKVGeoNavigator.html#a9ec397c0937ba8de1404ffe74adb3715">GetCurrentVolume</a>()-&gt;GetName();</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span> (vn.BeginsWith(<span class="stringliteral">&quot;DEADZONE&quot;</span>)) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         part-&gt;<a class="code" href="classKVParticle.html#a32a39659542dbdd65c691f70524e4ea4">GetParameters</a>()-&gt;<a class="code" href="classKVNameValueList.html#a2b9beaf43ac8d3374c57f8cba5eb030b">SetValue</a>(<span class="stringliteral">&quot;DEADZONE&quot;</span>, Form(<span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="classKVGeoNavigator.html#a9ec397c0937ba8de1404ffe74adb3715">GetCurrentVolume</a>()-&gt;GetName(), <a class="code" href="classKVGeoNavigator.html#a4e9288694d8cdc8596850eda717ffd67">GetCurrentNode</a>()-&gt;GetName()));</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">//        if(IsTracking()) Info(&quot;PropagateParticle&quot;,&quot;just before ParticleEntersNewVolume\nnow i am in %s on node %s with path %s&quot;,</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">//             fCurrentVolume-&gt;GetName(),fCurrentNode-&gt;GetName(),fCurrentPath.Data());</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a9deedb00979b35dcb6d48673cb2df557">ParticleEntersNewVolume</a>(part);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#aa57f869438ab701a2eccd941d3623f9f">StopPropagation</a>()) <span class="keywordflow">break</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="classKVGeoNavigator.html#ad5b3255edc43032342fac9d34ffbb4a7">fCurrentVolume</a> = newVol;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="classKVGeoNavigator.html#aab86fc2133cb4d5631e4013e8d0f4710">fCurrentNode</a> = newNod;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a526f0663f9f8daa65635afd37b6e99e5">fMotherNode</a> = newMom;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a0c3adc407dfbcc24f92304e07b184082">fCurrentMatrix</a> = *newMatx;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a2e48959ee9444888dc9faabdc76d9ab0">fCurrentPath</a> = newPath;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">//       if(IsTracking()) Info(&quot;PropagateParticle&quot;,&quot;after ParticleEntersNewVolume\nnow i am in %s on node %s with path %s&quot;,</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">//             fCurrentVolume-&gt;GetName(),fCurrentNode-&gt;GetName(),fCurrentPath.Data());</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="comment">// move on to next volume crossed by trajectory</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;FindNextBoundaryAndStep();</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="classKVGeoNavigator.html#aa3959e2aa7a5b64205af88478aaad090">fStepSize</a> = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetStep();</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      newVol = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentVolume();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      newNod = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentNode();</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      newMom = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetMother();</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      newMatx = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentMatrix();</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      newPath = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetPath();</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classKVGeoNavigator.html#a01a9633a452192b3b48e163c4236e0a7">IsTracking</a>() &amp;&amp; <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;IsOutside()) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keyword">const</span> Double_t* posi = <a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetCurrentPoint();</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="classKVGeoNavigator.html#a019024276fdc5ce72e386776840037e0">AddPointToCurrentTrack</a>(posi[0], posi[1], posi[2]);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;}</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="classKVGeoNavigator.html#afca341c042557cca81471b6971690bbf">  870</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classKVGeoNavigator.html#afca341c042557cca81471b6971690bbf">KVGeoNavigator::DrawTracks</a>(<a class="code" href="classKVNumberList.html">KVNumberList</a>* zlist)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;{</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <span class="comment">// When using ROOT geometry, after calling DetectEvent to simulate detection of some particles,</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="comment">// you can call this method to overlay the tracks of the corresponding particles on the 3D</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="comment">// geometry of the array</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="comment">// If KVNumberList pointer is given, use it to limit Z of drawn tracks</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   TIter next_track(<a class="code" href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">fGeometry</a>-&gt;GetListOfTracks());</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   TVirtualGeoTrack* track;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">while</span> ((track = (TVirtualGeoTrack*)next_track())) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="classKVNucleus.html">KVNucleus</a> nuc(track-&gt;GetName());</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">if</span> (!zlist || zlist-&gt;<a class="code" href="classKVNumberList.html#a2bbb2cfe1b472ee4c049f69fd801cffe">Contains</a>(nuc.GetZ())) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;         <a class="code" href="classKV3DGeoTrack.html">KV3DGeoTrack</a>* gtrack = <span class="keyword">new</span> <a class="code" href="classKV3DGeoTrack.html">KV3DGeoTrack</a>(track);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         <span class="keywordflow">if</span> (first) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordflow">if</span> (gPad) gtrack-&gt;<a class="code" href="classKV3DGeoTrack.html#afe82b2790b78eb63c5923256019e29d7">Draw</a>(<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            <span class="keywordflow">else</span> gtrack-&gt;<a class="code" href="classKV3DGeoTrack.html#afe82b2790b78eb63c5923256019e29d7">Draw</a>(<span class="stringliteral">&quot;ogl&quot;</span>);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            first = <span class="keyword">false</span>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;         } <span class="keywordflow">else</span> gtrack-&gt;<a class="code" href="classKV3DGeoTrack.html#afe82b2790b78eb63c5923256019e29d7">Draw</a>(<span class="stringliteral">&quot;same&quot;</span>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="ttc" id="classKVGeoNavigator_html_a3480e5416e2a39961da6751e36375edd"><div class="ttname"><a href="classKVGeoNavigator.html#a3480e5416e2a39961da6751e36375edd">KVGeoNavigator::FormatDetectorName</a></div><div class="ttdeci">void FormatDetectorName(const Char_t *basename, KVString &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00219">KVGeoNavigator.cpp:219</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a019024276fdc5ce72e386776840037e0"><div class="ttname"><a href="classKVGeoNavigator.html#a019024276fdc5ce72e386776840037e0">KVGeoNavigator::AddPointToCurrentTrack</a></div><div class="ttdeci">virtual void AddPointToCurrentTrack(Double_t, Double_t, Double_t)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00156">KVGeoNavigator.h:156</a></div></div>
<div class="ttc" id="classKVSeqCollection_html_a50a61ec8a84ae8f5c42afd2b27a12b60"><div class="ttname"><a href="classKVSeqCollection.html#a50a61ec8a84ae8f5c42afd2b27a12b60">KVSeqCollection::SetOwner</a></div><div class="ttdeci">virtual void SetOwner(Bool_t enable=kTRUE)</div><div class="ttdef"><b>Definition:</b> <a href="KVSeqCollection_8h_source.html#l00162">KVSeqCollection.h:162</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_ab26d59e8661ebb24af61f2b76b0b1f77"><div class="ttname"><a href="classKVGeoNavigator.html#ab26d59e8661ebb24af61f2b76b0b1f77">KVGeoNavigator::~KVGeoNavigator</a></div><div class="ttdeci">virtual ~KVGeoNavigator()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00324">KVGeoNavigator.cpp:324</a></div></div>
<div class="ttc" id="classKV3DGeoTrack_html"><div class="ttname"><a href="classKV3DGeoTrack.html">KV3DGeoTrack</a></div><div class="ttdef"><b>Definition:</b> <a href="KV3DGeoTrack_8h_source.html#l00008">KV3DGeoTrack.h:8</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a526f0663f9f8daa65635afd37b6e99e5"><div class="ttname"><a href="classKVGeoNavigator.html#a526f0663f9f8daa65635afd37b6e99e5">KVGeoNavigator::fMotherNode</a></div><div class="ttdeci">TGeoNode * fMotherNode</div><div class="ttdoc">mother node of current node </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00030">KVGeoNavigator.h:30</a></div></div>
<div class="ttc" id="classKVString_html_a09cf7b4f40f96fc75a3e1d244aecc386"><div class="ttname"><a href="classKVString.html#a09cf7b4f40f96fc75a3e1d244aecc386">KVString::Begin</a></div><div class="ttdeci">virtual void Begin(TString delim) const</div><div class="ttdef"><b>Definition:</b> <a href="KVString_8cpp_source.html#l00600">KVString.cpp:600</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a9e2c189eb3e425efb3260f3968c4dc47"><div class="ttname"><a href="classKVGeoNavigator.html#a9e2c189eb3e425efb3260f3968c4dc47">KVGeoNavigator::GetCurrentPath</a></div><div class="ttdeci">TString GetCurrentPath() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00137">KVGeoNavigator.h:137</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_ad5b3255edc43032342fac9d34ffbb4a7"><div class="ttname"><a href="classKVGeoNavigator.html#ad5b3255edc43032342fac9d34ffbb4a7">KVGeoNavigator::fCurrentVolume</a></div><div class="ttdeci">TGeoVolume * fCurrentVolume</div><div class="ttdoc">current volume </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00023">KVGeoNavigator.h:23</a></div></div>
<div class="ttc" id="classKVNumberList_html_a2bbb2cfe1b472ee4c049f69fd801cffe"><div class="ttname"><a href="classKVNumberList.html#a2bbb2cfe1b472ee4c049f69fd801cffe">KVNumberList::Contains</a></div><div class="ttdeci">Bool_t Contains(Int_t val) const</div><div class="ttdoc">returns kTRUE if the value &amp;#39;val&amp;#39; is contained in the ranges defined by the number list ...</div><div class="ttdef"><b>Definition:</b> <a href="KVNumberList_8cpp_source.html#l00454">KVNumberList.cpp:454</a></div></div>
<div class="ttc" id="namespaceKVUnits_html_af13ae353c0bc16e77ec01cc6aee48999"><div class="ttname"><a href="namespaceKVUnits.html#af13ae353c0bc16e77ec01cc6aee48999">KVUnits::g</a></div><div class="ttdeci">const long double g</div><div class="ttdef"><b>Definition:</b> <a href="KVUnits_8h_source.html#l00024">KVUnits.h:24</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a25547bc6209cee3bd05653b9ddd8f6b2"><div class="ttname"><a href="classKVGeoNavigator.html#a25547bc6209cee3bd05653b9ddd8f6b2">KVGeoNavigator::fCurrentStructures</a></div><div class="ttdeci">TClonesArray fCurrentStructures</div><div class="ttdoc">list of current structures deduced from path </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00028">KVGeoNavigator.h:28</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a49388999bdbbd4e543a899b948b3c296"><div class="ttname"><a href="classKVGeoNavigator.html#a49388999bdbbd4e543a899b948b3c296">KVGeoNavigator::ExtractDetectorNameFromPath</a></div><div class="ttdeci">void ExtractDetectorNameFromPath(KVString &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00669">KVGeoNavigator.cpp:669</a></div></div>
<div class="ttc" id="classKVBase_html_adaa0b6b0275567d5fd50e2a1a869ed1c"><div class="ttname"><a href="classKVBase.html#adaa0b6b0275567d5fd50e2a1a869ed1c">KVBase::SearchKVFile</a></div><div class="ttdeci">static Bool_t SearchKVFile(const Char_t *name, TString &amp;fullpath, const Char_t *kvsubdir=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="KVBase_8cpp_source.html#l00732">KVBase.cpp:732</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a6935e6fc94293409f6f447e74da018dd"><div class="ttname"><a href="classKVGeoNavigator.html#a6935e6fc94293409f6f447e74da018dd">KVGeoNavigator::fStrucNameFmt</a></div><div class="ttdeci">KVNameValueList fStrucNameFmt</div><div class="ttdoc">list of user-defined formats for structure names </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00038">KVGeoNavigator.h:38</a></div></div>
<div class="ttc" id="classKVParticle_html_a32a39659542dbdd65c691f70524e4ea4"><div class="ttname"><a href="classKVParticle.html#a32a39659542dbdd65c691f70524e4ea4">KVParticle::GetParameters</a></div><div class="ttdeci">KVNameValueList * GetParameters() const</div><div class="ttdef"><b>Definition:</b> <a href="KVParticle_8h_source.html#l00373">KVParticle.h:373</a></div></div>
<div class="ttc" id="classKVEvent_html"><div class="ttname"><a href="classKVEvent.html">KVEvent</a></div><div class="ttdoc">Base class for all types of multiparticle event consisting of KVNucleus objects. </div><div class="ttdef"><b>Definition:</b> <a href="KVEvent_8h_source.html#l00042">KVEvent.h:42</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html"><div class="ttname"><a href="classKVGeoNavigator.html">KVGeoNavigator</a></div><div class="ttdoc">Propagate particles of an event through a TGeo geometry. </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00020">KVGeoNavigator.h:20</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_ae3f3bf93c33f9af1b624d08a94ebdcdf"><div class="ttname"><a href="classKVGeoNavigator.html#ae3f3bf93c33f9af1b624d08a94ebdcdf">KVGeoNavigator::GetCurrentDetectorNameAndVolume</a></div><div class="ttdeci">TGeoVolume * GetCurrentDetectorNameAndVolume(KVString &amp;, Bool_t &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00550">KVGeoNavigator.cpp:550</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a019255092610bfed928ca20abc166643"><div class="ttname"><a href="classKVGeoNavigator.html#a019255092610bfed928ca20abc166643">KVGeoNavigator::FormatStructureName</a></div><div class="ttdeci">void FormatStructureName(const Char_t *type, Int_t number, KVString &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00168">KVGeoNavigator.cpp:168</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a7f519f3d934ed37797da23617c432f93"><div class="ttname"><a href="classKVGeoNavigator.html#a7f519f3d934ed37797da23617c432f93">KVGeoNavigator::PropagateParticle</a></div><div class="ttdeci">virtual void PropagateParticle(KVNucleus *, TVector3 *TheOrigin=0)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00768">KVGeoNavigator.cpp:768</a></div></div>
<div class="ttc" id="classKVBase_html_af816a5fef5b105b2d14db80274b931df"><div class="ttname"><a href="classKVBase.html#af816a5fef5b105b2d14db80274b931df">KVBase::GetNumber</a></div><div class="ttdeci">UInt_t GetNumber() const</div><div class="ttdef"><b>Definition:</b> <a href="KVBase_8h_source.html#l00101">KVBase.h:101</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a4cd424f7215ae3657967e04791dc67d8"><div class="ttname"><a href="classKVGeoNavigator.html#a4cd424f7215ae3657967e04791dc67d8">KVGeoNavigator::fDetectorPaths</a></div><div class="ttdeci">KVUniqueNameList fDetectorPaths</div><div class="ttdoc">correspondance between physical node and detector objects </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00059">KVGeoNavigator.h:59</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_afca341c042557cca81471b6971690bbf"><div class="ttname"><a href="classKVGeoNavigator.html#afca341c042557cca81471b6971690bbf">KVGeoNavigator::DrawTracks</a></div><div class="ttdeci">void DrawTracks(KVNumberList *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00870">KVGeoNavigator.cpp:870</a></div></div>
<div class="ttc" id="classKVNameValueList_html_a2b9beaf43ac8d3374c57f8cba5eb030b"><div class="ttname"><a href="classKVNameValueList.html#a2b9beaf43ac8d3374c57f8cba5eb030b">KVNameValueList::SetValue</a></div><div class="ttdeci">void SetValue(const Char_t *name, value_type value)</div><div class="ttdef"><b>Definition:</b> <a href="KVNameValueList_8h_source.html#l00043">KVNameValueList.h:43</a></div></div>
<div class="ttc" id="classKVString_html"><div class="ttname"><a href="classKVString.html">KVString</a></div><div class="ttdef"><b>Definition:</b> <a href="KVString_8h_source.html#l00025">KVString.h:25</a></div></div>
<div class="ttc" id="KVGeoNavigator_8h_html"><div class="ttname"><a href="KVGeoNavigator_8h.html">KVGeoNavigator.h</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a9d6becf030aed3aa1509b07728428c53"><div class="ttname"><a href="classKVGeoNavigator.html#a9d6becf030aed3aa1509b07728428c53">KVGeoNavigator::GetCurrentDetectorNode</a></div><div class="ttdeci">TGeoNode * GetCurrentDetectorNode() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00598">KVGeoNavigator.cpp:598</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a59096ccacf9de22c29c16ff6676b4b6e"><div class="ttname"><a href="classKVGeoNavigator.html#a59096ccacf9de22c29c16ff6676b4b6e">KVGeoNavigator::SetTracking</a></div><div class="ttdeci">void SetTracking(Bool_t on=kTRUE)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00084">KVGeoNavigator.h:84</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a9ec397c0937ba8de1404ffe74adb3715"><div class="ttname"><a href="classKVGeoNavigator.html#a9ec397c0937ba8de1404ffe74adb3715">KVGeoNavigator::GetCurrentVolume</a></div><div class="ttdeci">TGeoVolume * GetCurrentVolume() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00114">KVGeoNavigator.h:114</a></div></div>
<div class="ttc" id="KV3DGeoTrack_8h_html"><div class="ttname"><a href="KV3DGeoTrack_8h.html">KV3DGeoTrack.h</a></div></div>
<div class="ttc" id="classKVBase_html_a65aa52b4a7dfd386222c6aa4971f73dc"><div class="ttname"><a href="classKVBase.html#a65aa52b4a7dfd386222c6aa4971f73dc">KVBase::IsType</a></div><div class="ttdeci">virtual Bool_t IsType(const Char_t *typ) const</div><div class="ttdef"><b>Definition:</b> <a href="KVBase_8h_source.html#l00066">KVBase.h:66</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_aa57f869438ab701a2eccd941d3623f9f"><div class="ttname"><a href="classKVGeoNavigator.html#aa57f869438ab701a2eccd941d3623f9f">KVGeoNavigator::StopPropagation</a></div><div class="ttdeci">Bool_t StopPropagation() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00142">KVGeoNavigator.h:142</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a7a79ba3f5e3996762029dc5f299b71a9"><div class="ttname"><a href="classKVGeoNavigator.html#a7a79ba3f5e3996762029dc5f299b71a9">KVGeoNavigator::SetStopPropagation</a></div><div class="ttdeci">void SetStopPropagation(Bool_t stop=kTRUE)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00146">KVGeoNavigator.h:146</a></div></div>
<div class="ttc" id="classKVNucleus_html"><div class="ttname"><a href="classKVNucleus.html">KVNucleus</a></div><div class="ttdef"><b>Definition:</b> <a href="KVNucleus_8h_source.html#l00027">KVNucleus.h:27</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a9deedb00979b35dcb6d48673cb2df557"><div class="ttname"><a href="classKVGeoNavigator.html#a9deedb00979b35dcb6d48673cb2df557">KVGeoNavigator::ParticleEntersNewVolume</a></div><div class="ttdeci">virtual void ParticleEntersNewVolume(KVNucleus *)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00502">KVGeoNavigator.cpp:502</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_abe5e12a96ae8423c61f8e57581570388"><div class="ttname"><a href="classKVGeoNavigator.html#abe5e12a96ae8423c61f8e57581570388">KVGeoNavigator::fCurStrucNumber</a></div><div class="ttdeci">Int_t fCurStrucNumber</div><div class="ttdoc">number of current parent structures </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00029">KVGeoNavigator.h:29</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a7684dc8ddde5613d68c72f2083a8eddf"><div class="ttname"><a href="classKVGeoNavigator.html#a7684dc8ddde5613d68c72f2083a8eddf">KVGeoNavigator::fExitPoint</a></div><div class="ttdeci">TVector3 fExitPoint</div><div class="ttdoc">position of particle on exiting volume </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00033">KVGeoNavigator.h:33</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_ab3ab950e30c41f0c866a6c90c124264d"><div class="ttname"><a href="classKVGeoNavigator.html#ab3ab950e30c41f0c866a6c90c124264d">KVGeoNavigator::fEntryPoint</a></div><div class="ttdeci">TVector3 fEntryPoint</div><div class="ttdoc">position of particle on entering volume </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00032">KVGeoNavigator.h:32</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a439af5bb3c1ba645366bd68e8a2bffc0"><div class="ttname"><a href="classKVGeoNavigator.html#a439af5bb3c1ba645366bd68e8a2bffc0">KVGeoNavigator::fCurrentDetectorNode</a></div><div class="ttdeci">TGeoNode * fCurrentDetectorNode</div><div class="ttdoc">node for current detector </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00025">KVGeoNavigator.h:25</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_ace0a5385d6317083f5651a29ba2b563e"><div class="ttname"><a href="classKVGeoNavigator.html#ace0a5385d6317083f5651a29ba2b563e">KVGeoNavigator::ResetTrackID</a></div><div class="ttdeci">void ResetTrackID(Int_t id=0)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00072">KVGeoNavigator.h:72</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a113f034fedaf0737a6abfa462ed9a767"><div class="ttname"><a href="classKVGeoNavigator.html#a113f034fedaf0737a6abfa462ed9a767">KVGeoNavigator::GetCurrentMatrix</a></div><div class="ttdeci">const TGeoHMatrix * GetCurrentMatrix() const</div><div class="ttdoc">Returns pointer to internal copy of current global transformation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00529">KVGeoNavigator.cpp:529</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a2e48959ee9444888dc9faabdc76d9ab0"><div class="ttname"><a href="classKVGeoNavigator.html#a2e48959ee9444888dc9faabdc76d9ab0">KVGeoNavigator::fCurrentPath</a></div><div class="ttdeci">TString fCurrentPath</div><div class="ttdoc">current full path to physical node </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00027">KVGeoNavigator.h:27</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a01a9633a452192b3b48e163c4236e0a7"><div class="ttname"><a href="classKVGeoNavigator.html#a01a9633a452192b3b48e163c4236e0a7">KVGeoNavigator::IsTracking</a></div><div class="ttdeci">Bool_t IsTracking() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00088">KVGeoNavigator.h:88</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a707beaf4fbdca6d9dd2f97eede43bf98"><div class="ttname"><a href="classKVGeoNavigator.html#a707beaf4fbdca6d9dd2f97eede43bf98">KVGeoNavigator::SetNameCorrespondanceList</a></div><div class="ttdeci">void SetNameCorrespondanceList(const Char_t *)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00387">KVGeoNavigator.cpp:387</a></div></div>
<div class="ttc" id="classKVEvent_html_a8e8cebe0efefb4be95272938bedc8c8b"><div class="ttname"><a href="classKVEvent.html#a8e8cebe0efefb4be95272938bedc8c8b">KVEvent::GetNextParticle</a></div><div class="ttdeci">KVNucleus * GetNextParticle(Option_t *opt=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="KVEvent_8cpp_source.html#l00656">KVEvent.cpp:656</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a0c3adc407dfbcc24f92304e07b184082"><div class="ttname"><a href="classKVGeoNavigator.html#a0c3adc407dfbcc24f92304e07b184082">KVGeoNavigator::fCurrentMatrix</a></div><div class="ttdeci">TGeoHMatrix fCurrentMatrix</div><div class="ttdoc">current global transformation matrix </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00026">KVGeoNavigator.h:26</a></div></div>
<div class="ttc" id="classKVString_html_a2b4b016b6db4b17ce8acdacf8c3b9f85"><div class="ttname"><a href="classKVString.html#a2b4b016b6db4b17ce8acdacf8c3b9f85">KVString::End</a></div><div class="ttdeci">virtual Bool_t End() const</div><div class="ttdef"><b>Definition:</b> <a href="KVString_8cpp_source.html#l00662">KVString.cpp:662</a></div></div>
<div class="ttc" id="classKV3DGeoTrack_html_afe82b2790b78eb63c5923256019e29d7"><div class="ttname"><a href="classKV3DGeoTrack.html#afe82b2790b78eb63c5923256019e29d7">KV3DGeoTrack::Draw</a></div><div class="ttdeci">void Draw(Option_t *option=&quot;&quot;)</div><div class="ttdoc">Override Draw to add a TPolyMarker3D at the end of the track. </div><div class="ttdef"><b>Definition:</b> <a href="KV3DGeoTrack_8cpp_source.html#l00092">KV3DGeoTrack.cpp:92</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_aa3959e2aa7a5b64205af88478aaad090"><div class="ttname"><a href="classKVGeoNavigator.html#aa3959e2aa7a5b64205af88478aaad090">KVGeoNavigator::fStepSize</a></div><div class="ttdeci">Double_t fStepSize</div><div class="ttdoc">distance to travel in volume </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00031">KVGeoNavigator.h:31</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a4e9288694d8cdc8596850eda717ffd67"><div class="ttname"><a href="classKVGeoNavigator.html#a4e9288694d8cdc8596850eda717ffd67">KVGeoNavigator::GetCurrentNode</a></div><div class="ttdeci">TGeoNode * GetCurrentNode() const</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00118">KVGeoNavigator.h:118</a></div></div>
<div class="ttc" id="KVGeoStrucElement_8h_html"><div class="ttname"><a href="KVGeoStrucElement_8h.html">KVGeoStrucElement.h</a></div></div>
<div class="ttc" id="classKVBase_html_a86746121f4faf4c7c4424d22947f2124"><div class="ttname"><a href="classKVBase.html#a86746121f4faf4c7c4424d22947f2124">KVBase::GetType</a></div><div class="ttdeci">const Char_t * GetType() const</div><div class="ttdef"><b>Definition:</b> <a href="KVBase_8h_source.html#l00058">KVBase.h:58</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a77ffe33abca3c50b7e41cb33de08d645"><div class="ttname"><a href="classKVGeoNavigator.html#a77ffe33abca3c50b7e41cb33de08d645">KVGeoNavigator::fDetStrucNameCorrespList</a></div><div class="ttdeci">TEnv * fDetStrucNameCorrespList</div><div class="ttdoc">list(s) of correspondance for renaming structures/detectors </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00040">KVGeoNavigator.h:40</a></div></div>
<div class="ttc" id="KVEvent_8h_html"><div class="ttname"><a href="KVEvent_8h.html">KVEvent.h</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_aa4f68e9fc809d5f59b27169148f04a10"><div class="ttname"><a href="classKVGeoNavigator.html#aa4f68e9fc809d5f59b27169148f04a10">KVGeoNavigator::fGeometry</a></div><div class="ttdeci">TGeoManager * fGeometry</div><div class="ttdoc">geometry to navigate </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00022">KVGeoNavigator.h:22</a></div></div>
<div class="ttc" id="classKVParticle_html_a29e68736298c51e68b655290980c1321"><div class="ttname"><a href="classKVParticle.html#a29e68736298c51e68b655290980c1321">KVParticle::GetMomentum</a></div><div class="ttdeci">TVector3 GetMomentum() const</div><div class="ttdef"><b>Definition:</b> <a href="KVParticle_8h_source.html#l00204">KVParticle.h:204</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_adb30191411edd592d1bb66b6764021cd"><div class="ttname"><a href="classKVGeoNavigator.html#adb30191411edd592d1bb66b6764021cd">KVGeoNavigator::SetStructureNameFormat</a></div><div class="ttdeci">void SetStructureNameFormat(const Char_t *type, const Char_t *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00346">KVGeoNavigator.cpp:346</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a5d89830bace18f2b3544cb033a39dacf"><div class="ttname"><a href="classKVGeoNavigator.html#a5d89830bace18f2b3544cb033a39dacf">KVGeoNavigator::KVGeoNavigator</a></div><div class="ttdeci">KVGeoNavigator(TGeoManager *)</div><div class="ttdoc">Constructor. Call with pointer to geometry. </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00310">KVGeoNavigator.cpp:310</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_a10927a0ff377bed8ed4cbb03183ace35"><div class="ttname"><a href="classKVGeoNavigator.html#a10927a0ff377bed8ed4cbb03183ace35">KVGeoNavigator::PropagateEvent</a></div><div class="ttdeci">void PropagateEvent(KVEvent *, TVector3 *TheOrigin=0)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00469">KVGeoNavigator.cpp:469</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_abbb535d70cf595e6b3b7705597e9dd07"><div class="ttname"><a href="classKVGeoNavigator.html#abbb535d70cf595e6b3b7705597e9dd07">KVGeoNavigator::fDetNameFmt</a></div><div class="ttdeci">KVString fDetNameFmt</div><div class="ttdoc">user-defined format for detector names </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00039">KVGeoNavigator.h:39</a></div></div>
<div class="ttc" id="classKVGeoStrucElement_html"><div class="ttname"><a href="classKVGeoStrucElement.html">KVGeoStrucElement</a></div><div class="ttdoc">A multidetector array geometry structural element. </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoStrucElement_8h_source.html#l00011">KVGeoStrucElement.h:11</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_aa34e5167ea54c2cd30d1d2784bc90a98"><div class="ttname"><a href="classKVGeoNavigator.html#aa34e5167ea54c2cd30d1d2784bc90a98">KVGeoNavigator::GetNameCorrespondance</a></div><div class="ttdeci">Bool_t GetNameCorrespondance(const Char_t *, TString &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8cpp_source.html#l00440">KVGeoNavigator.cpp:440</a></div></div>
<div class="ttc" id="classKVNumberList_html"><div class="ttname"><a href="classKVNumberList.html">KVNumberList</a></div><div class="ttdoc">Strings used to represent a set of ranges of values. </div><div class="ttdef"><b>Definition:</b> <a href="KVNumberList_8h_source.html#l00021">KVNumberList.h:21</a></div></div>
<div class="ttc" id="classKVString_html_a3c430dc4fec2741cb11c6e8ba2eae185"><div class="ttname"><a href="classKVString.html#a3c430dc4fec2741cb11c6e8ba2eae185">KVString::Next</a></div><div class="ttdeci">virtual KVString Next(Bool_t strip_whitespace=kFALSE) const</div><div class="ttdef"><b>Definition:</b> <a href="KVString_8cpp_source.html#l00712">KVString.cpp:712</a></div></div>
<div class="ttc" id="classKVGeoNavigator_html_aab86fc2133cb4d5631e4013e8d0f4710"><div class="ttname"><a href="classKVGeoNavigator.html#aab86fc2133cb4d5631e4013e8d0f4710">KVGeoNavigator::fCurrentNode</a></div><div class="ttdeci">TGeoNode * fCurrentNode</div><div class="ttdoc">current node </div><div class="ttdef"><b>Definition:</b> <a href="KVGeoNavigator_8h_source.html#l00024">KVGeoNavigator.h:24</a></div></div>
<div class="ttc" id="classKVBase_html_a8083ad16b5c73b6600de8c429f8dd262"><div class="ttname"><a href="classKVBase.html#a8083ad16b5c73b6600de8c429f8dd262">KVBase::SetNumber</a></div><div class="ttdeci">virtual void SetNumber(UInt_t num)</div><div class="ttdef"><b>Definition:</b> <a href="KVBase_8h_source.html#l00097">KVBase.h:97</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 30 2018 17:40:10 for KaliVeda by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
