<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KaliVeda: globvars_kvzmax.C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ROOT.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KaliVeda
   &#160;<span id="projectnumber">1.10/15</span>
   </div>
   <div id="projectbrief">Heavy-Ion Analysis Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">globvars_kvzmax.C</div>  </div>
</div><!--header-->
<div class="contents">
<h1>Examples of use of the <a class="el" href="classKVZmax.html">KVZmax</a> global variable</h1>
<p><a class="el" href="classKVZmax.html">KVZmax</a> sorts nuclei in an event as a function of decreasing Z.</p>
<p>To execute this function, do:</p>
<p>$ kaliveda kaliveda[0] .L globvars_kvzmax.C+ kaliveda[1] zmax_example1() kaliveda[2] zmax_example2()</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;TTree.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;TCanvas.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="KVZmax_8h.html">KVZmax.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="KVGVList_8h.html">KVGVList.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="KVEvent_8h.html">KVEvent.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> zmax_example1()</div><div class="line">{</div><div class="line">   <span class="comment">// Example to demonstrate basic use of KVZmax to access sorted list</span></div><div class="line">   <span class="comment">// of nuclei in descending order of Z</span></div><div class="line"></div><div class="line">   <span class="comment">/* STEP 1: make random event */</span></div><div class="line">   <span class="keywordtype">int</span> mult = gRandom-&gt;Integer(10) + 5; <span class="comment">// random multiplicity 5&lt;=M&lt;15</span></div><div class="line">   <a name="_a0"></a><a class="code" href="classKVEvent.html">KVEvent</a> event;</div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mult; ++i) {</div><div class="line">      <span class="comment">// fill event with random nuclei 1&lt;=Z&lt;=50</span></div><div class="line">      <span class="keyword">event</span>.<a name="a1"></a><a class="code" href="classKVEvent.html#a86f8aa103f577ebe92f7d2b0b675ed8a">AddParticle</a>()-&gt;<a name="a2"></a><a class="code" href="classKVNucleus.html#a6983e634af13af641a0d7f4725ca6521">SetZ</a>(gRandom-&gt;Integer(50) + 1);</div><div class="line">   }</div><div class="line">   cout &lt;&lt; <span class="stringliteral">&quot;Random event :&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line">   <span class="keyword">event</span>.Print();</div><div class="line"></div><div class="line">   <span class="comment">/* STEP 2: use KVZmax global variable to rank nuclei in Z */</span></div><div class="line">   <a name="_a3"></a><a class="code" href="classKVZmax.html">KVZmax</a> zmax(<span class="stringliteral">&quot;ZMAX&quot;</span>);</div><div class="line">   zmax.<a name="a4"></a><a class="code" href="classKVZmax.html#a1def97b87dfe31cc23c40e9f0641f124">Init</a>();</div><div class="line">   <a name="_a5"></a><a class="code" href="classKVNucleus.html">KVNucleus</a>* nunuc;</div><div class="line">   <span class="keywordflow">while</span> ((nunuc = event.<a name="a6"></a><a class="code" href="classKVEvent.html#a8e8cebe0efefb4be95272938bedc8c8b">GetNextParticle</a>())) zmax.<a name="a7"></a><a class="code" href="classKVZmax.html#ab48e658dd5d51bfc8a4794b66e020cc0">Fill</a>(nunuc);</div><div class="line"></div><div class="line">   cout &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;Sorted event :&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; mult; ++i) zmax.<a name="a8"></a><a class="code" href="classKVZmax.html#a4d938a28c0205d7b79be18aca765dd90">GetZmax</a>(i)-&gt;<a name="a9"></a><a class="code" href="classKVNucleus.html#a57714f5cce37bc6d718a303087a39314">Print</a>();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> zmax_example2()</div><div class="line">{</div><div class="line">   <span class="comment">// Example showing how to:</span></div><div class="line">   <span class="comment">//   - use KVZmax with a KVGVList in order to automatically create</span></div><div class="line">   <span class="comment">//     and fill branches in a TTree containing the Z of the N largest</span></div><div class="line">   <span class="comment">//     nuclei in each event</span></div><div class="line">   <span class="comment">//   - apply a selection condition to a KVZmax to limit the nuclei</span></div><div class="line">   <span class="comment">//     included in the sorted list</span></div><div class="line"></div><div class="line">   <span class="comment">// We use a global variable list (KVGVList) in order to use the automatic</span></div><div class="line">   <span class="comment">// branch creation facility KVGVList::MakeBranches(TTree*)</span></div><div class="line">   <a name="_a10"></a><a class="code" href="classKVGVList.html">KVGVList</a> varlist;</div><div class="line"></div><div class="line">   <span class="comment">// 1st KVZmax: rank all nuclei according to Z</span></div><div class="line">   <a class="code" href="classKVZmax.html">KVZmax</a> zmax(<span class="stringliteral">&quot;ZMAX&quot;</span>);</div><div class="line">   zmax.<a name="a11"></a><a class="code" href="classKVVarGlob.html#a4ac43cd59a5cbae398d17e0d8ab07ad9">SetMaxNumBranches</a>(5);<span class="comment">//define number of branches to add to TTree</span></div><div class="line">   varlist.<a name="a12"></a><a class="code" href="classKVGVList.html#aab99edf090ffbbc9f9de73564f94a1f5">Add</a>(&amp;zmax);</div><div class="line"></div><div class="line">   <span class="comment">// 2nd KVZmax: only include nuclei with Z&lt;6</span></div><div class="line">   <a class="code" href="classKVZmax.html">KVZmax</a> zmax2(<span class="stringliteral">&quot;ZMAX_UPTO6&quot;</span>);</div><div class="line">   zmax2.<a class="code" href="classKVVarGlob.html#a4ac43cd59a5cbae398d17e0d8ab07ad9">SetMaxNumBranches</a>(1);<span class="comment">//only add branch for largest Z</span></div><div class="line">   zmax2.<a name="a13"></a><a class="code" href="classKVVarGlob.html#a3b98d2b332ab0d9bd00176b7d277f267">SetSelection</a>(<a name="_a14"></a><a class="code" href="classKVParticleCondition.html">KVParticleCondition</a>(<span class="stringliteral">&quot;_NUC_-&gt;GetZ()&lt;6&quot;</span>));</div><div class="line">   varlist.<a class="code" href="classKVGVList.html#aab99edf090ffbbc9f9de73564f94a1f5">Add</a>(&amp;zmax2);</div><div class="line"></div><div class="line">   <span class="comment">// initialisation of global variables</span></div><div class="line">   varlist.<a name="a15"></a><a class="code" href="classKVGVList.html#a5165148a0a2fb9e7dafc9546de5c986b">Init</a>();</div><div class="line"></div><div class="line">   <span class="comment">// In order to check the Z-sorting, we generate random events which all</span></div><div class="line">   <span class="comment">// contain the same nuclei in a different order</span></div><div class="line">   vector&lt;int&gt; zlist(10);</div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; ++i) zlist[i] = i + 1; <span class="comment">// list of Z = 1, 2, ..., 9, 10</span></div><div class="line">   <span class="comment">/*******C++11 version********</span></div><div class="line"><span class="comment">    * int z = 1;</span></div><div class="line"><span class="comment">    * generate_n(zlist.begin(), 10, [&amp;z](){return z++;}); // see http://www.cplusplus.com/reference/algorithm/generate_n</span></div><div class="line"><span class="comment">    * **************************/</span></div><div class="line"></div><div class="line">   TTree tree;</div><div class="line">   varlist.<a name="a16"></a><a class="code" href="classKVGVList.html#adada00e9ad1ae046b86bbffd6da8a651">MakeBranches</a>(&amp;tree);  <span class="comment">// automatically generate branches for global variables</span></div><div class="line">   tree.Print();</div><div class="line"></div><div class="line">   <span class="comment">// randomly generate 1000 events &amp; fill tree</span></div><div class="line">   <a class="code" href="classKVEvent.html">KVEvent</a> event;</div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; ++i) {</div><div class="line"></div><div class="line">      <span class="comment">// shuffle list of Z</span></div><div class="line">      random_shuffle(zlist.begin(), zlist.end()); <span class="comment">// see http://www.cplusplus.com/reference/algorithm/random_shuffle</span></div><div class="line">      <span class="comment">// fill event</span></div><div class="line">      <span class="keyword">event</span>.<a name="a17"></a><a class="code" href="classKVEvent.html#a2806c9a41d44a15d4ddc62eb83711a44">Clear</a>();</div><div class="line">      <span class="keywordflow">for</span> (vector&lt;int&gt;::iterator it = zlist.begin(); it != zlist.end(); ++it) {</div><div class="line">         <span class="keyword">event</span>.AddParticle()-&gt;SetZ(*it);</div><div class="line">      }</div><div class="line">      <span class="comment">/******C++11 version********</span></div><div class="line"><span class="comment">       * for(auto z : zlist)</span></div><div class="line"><span class="comment">       * {</span></div><div class="line"><span class="comment">       *    event.AddParticle()-&gt;SetZ(z);</span></div><div class="line"><span class="comment">       * }</span></div><div class="line"><span class="comment">       * *************************/</span></div><div class="line"></div><div class="line">      <span class="comment">// print 1st event, check it&#39;s random</span></div><div class="line">      <span class="keywordflow">if</span> (i == 0) {</div><div class="line">         <span class="keyword">event</span>.Print();</div><div class="line">      }</div><div class="line"></div><div class="line">      <span class="comment">// calculate global variable(s) for event</span></div><div class="line">      varlist.<a name="a18"></a><a class="code" href="classKVGVList.html#a4a9fc0a3712a965789a1177f383635c9">Reset</a>();</div><div class="line">      varlist.<a name="a19"></a><a class="code" href="classKVGVList.html#a94a7cc46b607d1c5f29ae37f37850ad0">CalculateGlobalVariables</a>(&amp;event);</div><div class="line"></div><div class="line">      <span class="comment">// fill tree with Z of 5 biggest nuclei</span></div><div class="line">      varlist.<a name="a20"></a><a class="code" href="classKVGVList.html#a153925570fd576357320f4b3bcd772e4">FillBranches</a>();</div><div class="line">      tree.Fill();</div><div class="line">   }</div><div class="line"></div><div class="line">   <span class="comment">// Draw histograms of the 5 largest Z</span></div><div class="line">   <span class="comment">// These should be: Zmax1=10, Zmax2=9, ..., Zmax5=6</span></div><div class="line">   TCanvas* can = <span class="keyword">new</span> TCanvas(<span class="stringliteral">&quot;c&quot;</span>, <span class="stringliteral">&quot;5 Largest Z&quot;</span>, 1644, 267);</div><div class="line">   can-&gt;Divide(5, 1);</div><div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= 5; ++i) {</div><div class="line">      can-&gt;cd(i);</div><div class="line">      tree.Draw(Form(<span class="stringliteral">&quot;ZMAX.Zmax%d&quot;</span>, i));</div><div class="line">   }</div><div class="line"></div><div class="line">   can = <span class="keyword">new</span> TCanvas;</div><div class="line">   tree.Draw(<span class="stringliteral">&quot;ZMAX_UPTO6.Zmax1&quot;</span>); <span class="comment">// should be equal to 5</span></div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 30 2018 17:40:09 for KaliVeda by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
